<div class="page">
  <form action="/users/{{username}}/" method="post">
    <legend>New Post</legend>
    <div class="new-post">
      <input type="text" id="post-title" placeholder="Title" name="title"><br></br>

      <!-- Hide Method -->
      <style>
        .hide {
          display: none;
        }
      </style>

      <!-- Select Text or Image -->
      <select id="target">
        <option value="">Select Upload Type</option>
        <option value="new-text">Text</option>
        <option value="new-img">Images</option>
      </select>

      <!-- Text Input -->
      <div id="new-text" class="hide">
        <input type="text" id="post-body" name="body" placeholder="Body">
      </div>

      <!-- Image Input -->
      <div id="new-img" class="hide">
        <div class="img-file">
          <input type="file" id="fileElem" multiple accept="image/*" style="display:none" onchange="handleFiles(this.files)">
          <a href="#" id="fileSelect">Select some files</a>
          <div id="fileList">
            <p>No files selected!</p>
          </div>
          <script>
          window.URL = window.URL || window.webkitURL;
          var fileSelect = document.getElementById("fileSelect"),
              fileElem = document.getElementById("fileElem"),
              fileList = document.getElementById("fileList");

          fileSelect.addEventListener("click", function (e) {
            if (fileElem) {
              fileElem.click();
            }
            e.preventDefault(); // prevent navigation to "#"
          }, false);

          function handleFiles(files) {
            if (!files.length) {
              fileList.innerHTML = "<p>No files selected!</p>";
            } else {
              fileList.innerHTML = "";
              var list = document.createElement("ul");
              fileList.appendChild(list);
              for (var i = 0; i < files.length; i++) {
                var li = document.createElement("li");
                list.appendChild(li);

                var img = document.createElement("img");
                img.src = window.URL.createObjectURL(files[i]);
                img.height = 60;
                img.onload = function() {
                  window.URL.revokeObjectURL(this.src);
                }
                li.appendChild(img);
                var info = document.createElement("span");
                info.innerHTML = files[i].name + ": " + files[i].size + " bytes";
                li.appendChild(info);
              }
            }
          }
          </script>
        </div>
      </div>

      <!-- JavaScript -->
      <script>
        document
          .getElementById('target')
          .addEventListener('change', function () {
            'use strict';
            var vis = document.querySelector('.vis'),
                target = document.getElementById(this.value);
            if (vis !== null) {
                vis.className = 'hide';
            }
            if (target !== null ) {
                target.className = 'vis';
            }
          });
        </script>
      <div>
        <button type="submit">Create</button>
      </div>
    </div>
  </form>
</div>
