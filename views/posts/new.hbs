<div class="page">
    <form action="/users/{{username}}" method="post" enctype="multipart/form-data">
      <div class="new-post">
        <h1>New Post</h1>

        <input type="text" id="post-title" class="form" placeholder="Title" name="title" size="30" required>
        <!-- <input type="date" id="date" class="form" name="date"</input> -->

        <div class="select">
          <button id='btn-file' class='select-btn' type="button" onclick="myFunction('file')">File</button>
          <button id='btn-img' class='select-btn' type="button" onclick="myFunction('img')">Image</button>
          <button id='btn-link' class='select-btn' type="button" onclick="myFunction('link')">Link</button>
          <button id='btn-text' class='select-btn' type="button" onclick="myFunction('text')">Text</button>
        </div>

        <!-- JavaScript -->
        <script>
          function myFunction(i) {
            const inputs = document.querySelectorAll('.post-fn');
            const buttons = document.querySelectorAll('.select-btn');

            inputs.forEach(input => {
              input.classList.remove('active')
            })

            buttons.forEach(button => {
              button.classList.remove('active')
            })

            const targetInput = document.getElementById(`post-${i}`)
            const targetBtn = document.getElementById(`btn-${i}`)

            targetInput.classList.add('active');
            targetBtn.classList.add('active');
          }
        </script>

        <!-- File Input -->
        <div id="post-file" class='post-fn'>
          <input type="file" id="post-file" name="picUrl">
        </div>

        <!-- Text Input -->
        <div id="post-text" class='post-fn'>
          <textarea id="post-body" name="body" rows="3" placeholder="Write or paste in some text..."></textarea>
        </div>

        <!-- Image Input -->
        <div id="post-img" class='post-fn'>
          <input type="file" id="post-img" name="picUrl">
        </div>

        <!-- Link Input -->
        <div id="post-link" class='post-fn'>
          <input type="url" id="post-link" class="form" name="link" placeholder="https://example.com">
        </div>

            <!-- <input type="file" id="post-img" name="picUrl" multiple accept="image/*" style="display:none" onchange="handleFiles(this.files)">
            <a href="#" id="fileSelect"><button>Select some files</button></a>

            <div id="fileList"><p>No files selected!</p></div>
            <script>
              window.URL = window.URL || window.webkitURL;
              var fileSelect = document.getElementById("fileSelect"),
                  fileElem = document.getElementById("fileElem"),
                  fileList = document.getElementById("fileList");

              fileSelect.addEventListener("click", function (e) {
                if (fileElem) {
                  fileElem.click();
                }
                e.preventDefault(); // prevent navigation to "#"
              }, false);

              function handleFiles(files) {
                if (!files.length) {
                  fileList.innerHTML = "<p>No files selected!</p>";
                } else {
                  fileList.innerHTML = "";
                  var list = document.createElement("ul");
                  fileList.appendChild(list);
                  for (var i = 0; i < files.length; i++) {
                    var li = document.createElement("li");
                    list.appendChild(li);
                    var img = document.createElement("img");
                    img.src = window.URL.createObjectURL(files[i]);
                    img.width = 140;
                    img.onload = function() {
                      window.URL.revokeObjectURL(this.src);
                    }
                    li.appendChild(img);
                    var info = document.createElement("span");
                    li.appendChild(info);
                  }
                }
              }
            </script> -->
      <div class="new-buttons">
        <button type="submit">Create</button>
      </div>
    </div>
  </form>
  <a href="/users/{{username}}"><button>Cancel</button></a>
</div>
